<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>《重学C++》前七章习题 | 菠萝屋</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.0/css/all.min.css">
<link rel="shortcut icon" href="https://444494.xyz/favicon.ico?v=1618646282087">
<link rel="stylesheet" href="https://444494.xyz/styles/main.css">


   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="第一章：
一、基础题

请说出C++语言的优点，缺点，和主要用途？（涉及知识点：1-4节 C++特点， 1-5 C++作用）

优点：

强大的抽象封装能力：这让C++语言具备了强大的开发工程能力，在封装的同时C++最大程度的保留了高性能；..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://444494.xyz">
        <img src="https://444494.xyz/images/avatar.png?v=1618646282087" class="site-logo">
        <h1 class="site-title">菠萝屋</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页 Blog
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档 Archives
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签 Tags
          </a>
        
      
        
          <a href="/about" class="site-nav">
            关于 About
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/valueism" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Kick ass!
    </div>
    <div class="site-footer">
       | <a class="rss" href="https://444494.xyz/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">《重学C++》前七章习题</h2>
            <div class="post-date">2021-04-09</div>
            
            <div class="post-content" v-pre>
              <h1 id="第一章">第一章：</h1>
<h2 id="一-基础题">一、基础题</h2>
<ol>
<li>请说出C++语言的优点，缺点，和主要用途？（<strong>涉及知识点：1-4节 C++特点， 1-5 C++作用</strong>）</li>
</ol>
<p>优点：</p>
<ul>
<li>强大的抽象封装能力：这让C++语言具备了强大的开发工程能力，在封装的同时C++最大程度的保留了高性能；</li>
<li>高性能：运行快，快并且占用资源少一直是C++语言的追求；</li>
<li>低功耗：特别适合在各种微型的嵌入式设备中运行高效的程序；</li>
</ul>
<p>缺点：</p>
<ul>
<li>语法相对复杂，细节比较多，学习曲线比较陡；</li>
<li>需要一些好的规范和范式，否则代码很难维护；</li>
</ul>
<h2 id="二-提高题">二、提高题</h2>
<ol>
<li>请参考课程演示代码&quot;CPPDemo1&quot;中的C++面向对象方式，思考C面向过程方式中如何实现trace功能在开关打开状态下写入到文件中，并想想这两种方式各自的优缺点？（<strong>涉及知识点：1-3节 C++vsC，面向对象vs面向过程</strong>）</li>
</ol>
<pre><code class="language-c">#include &lt;stdio.h&gt;
static bool trigger;
void turnOn()
{
	trigger = true;
}
void turnOff()
{
	trigger = false;
}
void write(char *s,int n)
{
	FILE *fp = fopen(&quot;test.txt&quot;,&quot;a+&quot;);
    if(trigger)
    {
        fwrite(s,1,n,fp);
    }
	fclose(fp);
}
int main()
{
	turnOn();
	write(&quot;First&quot;,5);
	turnOff();
	write(&quot;Second&quot;,6);
}
</code></pre>
<p>c语言需要用全局变量和全局函数来实现，在稍微大一些的项目中，将会产生难以维护，难以扩展，难以阅读的问题，而C++封装对象的方式就可以解决这些问题。</p>
<p>c语言在内存方面占用更小。在微型项目中编写更加方便。</p>
<h1 id="第二章">第二章</h1>
<h2 id="一-基础题-2">一、基础题</h2>
<ol>
<li>下面标识符是合法的有哪些（BEF ） （<strong>涉及知识点： 2-5 标识符与关键字</strong>）<br>
<strong>A</strong>.float<br>
<strong>B</strong>.ipad<br>
<strong>C</strong>.1button<br>
<strong>D</strong>. A#BC<br>
<strong>E</strong>.my_button<br>
<strong>F</strong>. button_1_ok</li>
<li>请给一个退出按钮命一个好变量名（ C）（<strong>涉及知识点： 2-5 标识符</strong>）<br>
<strong>A</strong>. 1button<br>
<strong>B</strong>. button1<br>
<strong>C</strong>.buttonQuit<br>
<strong>D</strong>.button_tuichu</li>
<li>下面整数常量合法的是（ D）（<strong>涉及知识点： 2-6 常量</strong>）<br>
<strong>A</strong>.078<br>
<strong>B</strong>.03UU<br>
<strong>C</strong>.0x9AHX<br>
<strong>D</strong>.0xFFAA00</li>
</ol>
<h2 id="二-提高题-2">二、提高题</h2>
<ol>
<li>
<p>下面程序输出结果是    (8)（<strong>涉及知识点： 2-6 常量的宏定义</strong>）</p>
<pre><code class="language-c++">#define MA(x) x*(x-1)
void main()
{
  int a=1, b=2;
  cout &lt;&lt; MA(1+a+b) &lt;&lt; endl;
}  // 8
   //ma(1+a+b) = 1+a+b*(1+a +b-1)
   //            = 1+1+2*(1+1+2-1)
   //            = 8
</code></pre>
</li>
</ol>
<h1 id="第三章">第三章：</h1>
<h2 id="一-填空">一、填空</h2>
<ol>
<li></li>
</ol>
<pre><code class="language-c++">  cout &lt;&lt;sizeof(char) &lt;&lt; endl;   //1
  cout &lt;&lt; sizeof(short) &lt;&lt; endl; //2
  cout &lt;&lt; sizeof(int) &lt;&lt; endl; //4
  cout &lt;&lt; sizeof(float) &lt;&lt; endl; //4
  cout &lt;&lt; sizeof(double) &lt;&lt; endl; //8
</code></pre>
<ol start="2">
<li></li>
</ol>
<pre><code class="language-c++">  a = (x=10,y=20,z=x+y);
  cout &lt;&lt; a &lt;&lt; endl; //30   逗号返回最后一个值
</code></pre>
<ol start="3">
<li></li>
</ol>
<pre><code class="language-c++">typedef struct{
   short Sunday = 0;
   short Monday = 1;
   short Tuesday = 2;
   short Wednesday = 3;
   short Thursday = 4;
   short Friday = 5;
   short Saturday = 6;
   } Week;
   Week w;
   cout &lt;&lt; sizeof(w.Sunday); //2
   cout &lt;&lt; sizeof(w) &lt;&lt; endl; //14
</code></pre>
<h2 id="二-编程题">二、编程题</h2>
<ol>
<li>
<p>使用#define 编写一段代码，来实现“标准”宏MIN</p>
<pre><code class="language-c++">#define MIN(a,b) (((a)&gt;=(b))?(b):(a))         //a,b可能为式子，故需单独加括号
</code></pre>
</li>
<li>
<p>分别写出bool 、int、 float、与“零值”比较，表达式返回值等于1的代码片段；</p>
<pre><code class="language-c++">#设变量为flag
////////////////////////////////////////////////////////////////////////
bool:
    if(flag)
int:
    if(flag == 0)
 double:
    const double EPSINON = 0.00001;  
 if ((flag &gt;= - EPSINON) &amp;&amp; (flag &lt;= EPSINON))
char *:
    if (flag == NULL)
</code></pre>
</li>
</ol>
<h1 id="第四五六章">第四五六章：</h1>
<h2 id="一-程序运行题">一、程序运行题</h2>
<ol>
<li>请说出下列问号处的结果：</li>
</ol>
<pre><code>    char str[] = “Hello” ;
	char *p = str ;
	int n = 10;
	//请计算
	sizeof (str ) = ?
	sizeof ( p )  = ?
	sizeof ( n )  = ?
	void Func ( char str[100])
	{
	//请计算
	    sizeof( str ) = ?
	}
</code></pre>
<p>答：</p>
<pre><code>	sizeof (str ) = 6
	sizeof ( p ) = 4 
	sizeof ( n ) = 4 
	void Func ( char str[100])
	{
	  sizeof( str ) = 4 
	}
</code></pre>
<blockquote>
<p>如果定义如下代码，那么该str2变量大小（sizeof(str2)）应该是多少？<br>
char* str2 = (char*)malloc(sizeof(char)*3);</p>
</blockquote>
<ol start="2">
<li></li>
</ol>
<pre><code>   void GetMemory(char *p)
   {
   	p = new char[100];
   }
   void Test(void)
   {
   	char *str = NULL;
   	GetMemory(str);
   	strcpy(str, &quot;hello world&quot;);
   	printf(str);
   }
</code></pre>
<p>问运行Test 函数会有什么样的结果？<br>
<strong>答：程序崩溃。因为GetMemory 并不能传递动态内存，<br>
Test 函数中的 str 一直都是 NULL。strcpy(str, &quot;hello world&quot;);将使程序崩溃。</strong></p>
<ol start="3">
<li></li>
</ol>
<pre><code>char *GetMemory(void)
   {
   	char p[] = &quot;hello world&quot;;
   	return p;
   }
   void Test(void)
   {
   	char *str = NULL;
   	str = GetMemory();
   	printf(str);
   }
</code></pre>
<p>请问运行Test 函数会有什么样的结果？<br>
<strong>答：可能是乱码;因为GetMemory 返回的是指向“栈内存”的指针，该指针的地址不是 NULL，但其原现的内容已经被清除，新内容不可知。</strong></p>
<ol start="4">
<li></li>
</ol>
<pre><code>  void GetMemory2(char **p, int num)
  {
  	*p = new char[num];
  }
  void Test(void)
  {
  	char *str = NULL;
  	GetMemory2(&amp;str, 100);
  	strcpy(str, &quot;hello&quot;);
  	printf(str);
  }
</code></pre>
<p>请问运行Test 函数会有什么样的结果？<br>
**答：能够输出hello，但内存泄漏 **</p>
<ol start="5">
<li></li>
</ol>
<pre><code>   # include &lt;string.h&gt;
    void Test(void)
    {
    	char *str = new  char[100];
    	strcpy(str, &quot;hello&quot;);
    	delete[ ] str;
    	if (str != NULL)
    	{
    		strcpy(str,&quot;world&quot;);
    		printf(str);
    	}
    }
</code></pre>
<p>请问运行Test 函数会有什么样的结果？<br>
<strong>答：篡改动态内存区的内容，后果难以预料，非常危险。因为 delete[ ]str;之后，str成为野指针(需要str = NULL;)if(str != NULL)语句不起作用。</strong></p>
<h2 id="二-编程题-2">二、编程题</h2>
<ol>
<li>char *strcpy(char *strDest, const char *strSrc)<br>
请在不调用C++/C 的字符串库函数的情况下，编写函数 strcpy；</li>
</ol>
<pre><code>char *strcpy(char *strDest, const char *strSrc);
{
  assert((strDest!=NULL) &amp;&amp; (strSrc !=NULL));
  char *address = strDest; 
  while( (*strDest++ = * strSrc++) != ‘\0’ )
      ;
  return address ; 
}
</code></pre>
<h1 id="第七章">第七章：</h1>
<h2 id="一-编程题">一、编程题</h2>
<p>编写自定义类String 的构造函数、析构函数和赋值函数。<br>
已知类String 的原型为：</p>
<pre><code>class String
{
public:
	String(const char *str = NULL);                             // 普通构造函数
	String(const String &amp;other);                                  // 拷贝构造函数
	String(String&amp;&amp; other);                                          // 移动构造函数
	~String(void);                                                            // 析构函数
	String&amp; operator= (const String&amp; other);             // 赋值函数
	String&amp; operator=(String&amp;&amp; rhs)noexcept;		  // 移动赋值运算符
private:
	char *m_data; // 用于保存字符串
};
</code></pre>
<p>请编写String 的上述几个函数。</p>
<pre><code>// String 的析构函数
String::~String(void)
{
	if (m_data != NULL)
	{
		delete[] m_data;
	}
}

// String 的普通构造函数
String::String(const char *str)
{
	if (str == NULL)
	{
		m_data = new char[1];
		if (m_data != NULL)
		{
			*m_data = '\0';
		}
		else
		{
			exit(-1); // new有可能失败，失败后返回错误退出, 最好能有日志
		}
	}
	else
	{
		int length = strlen(str);
		m_data = new char[length + 1];
		if (m_data != NULL)
		{
			*m_data = '\0';
		}
		else
		{
			exit(-1); // new有可能失败，失败后返回错误退出, 最好能有日志
		}
		strcpy(m_data, str);
	}
}
// 拷贝构造函数
String::String(const String &amp;other)
{
	int length = strlen(other.m_data);
	m_data = new char[length + 1];
	if (m_data != NULL)
	{
		*m_data = '\0';
	}
	else
	{
		exit(-1); // new有可能失败，失败后返回错误退出, 最好能有日志
	}
	strcpy(m_data, other.m_data);
}

String::String(String&amp;&amp; other)
{
	if (other.m_data != NULL)
	{
		m_data=other.m_data;
		other.m_data = NULL;
	}
}


// 赋值函数
String&amp; String::operator= (const String &amp;other)
{
	// 检查自赋值
	if (this == &amp;other)
		return *this;
	// 释放原有的内存资源 
	delete[] m_data;
	// 分配新的内存资源，并复制内容
	int length = strlen(other.m_data);
	m_data = new char[length + 1];
	if (m_data != NULL)
	{
		*m_data = '\0';
	}
	else
	{
		exit(-1); // new有可能失败，失败后返回错误退出, 最好能有日志
	}
	strcpy(m_data, other.m_data);
	//  返回本对象的引用
	return *this;
}

String&amp; String::operator=(String&amp;&amp; rhs)noexcept
{
	if (this != &amp;rhs)
	{
		delete[] m_data;
		m_data = rhs.m_data;
		rhs.m_data = NULL;
	}
	return *this;
}
</code></pre>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://444494.xyz/post/pJvUj9HhB/">
                  <h3 class="post-title">
                    使用现有公私钥，将Git 绑定到GitHub
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
